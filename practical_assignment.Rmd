---
title: "Regression"
author: "Anders Christensen, Anna Damkj√¶r Laksafoss and Stefan Bruhn Rasmussen"
date: "February 21, 2019"
output: html_document
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
fullrun <- TRUE
if (fullrun) {
  narwhal <- readRDS("outputs/narwhal.RDS")
} else {
  narwhal <- readRDS("outputs/narwhal_reduced.RDS")
}
narwhal <- readRDS("outputs/narwhal.RDS")
knitr::opts_chunk$set(echo = TRUE)
```


## Data clean up
Before we can analyse the data we must clean up the data. From the description of the data we can make the following initial changes:
* Combine *Date* and *Hour* to a new single time object called *Datetime*.
* Correct for positve *Depths* by substracting maximum value from all values
* Encode -1 as NA for those variables, where it applies

We also add a new variable
* *BothWhales* binary, encodes when both we have data on both whales at the current timepoint

Lastly we have removed the following data rows and variables
* Remove duplicate rows



## Exploratory analysis
```{r summaries}
summary(narwhal[,c(3:19)])
table(narwhal[,c("Ind","Phase")])
```

### Plot af numeriske variable

![](figs/numerical_densities.png)

Vi ser at

* Strokerate er "hakket" fordi det kun er integers

![](figs/depthtimeplot.png)
![](figs/locationplot.png)

### Ideas/Thoughts

* Make a binary *Phase* variable with level *T* and *I*
* Partion binary variables (such as *Calls*) into intervals (e.g. 30 second intervals around each call)
* Make A binary *Diving* variable by partioning the Depth variable.
* Pay attention to *Data leakage* (When you predict something using data which is not availiable at prediction time.)
* Make correlation plot
* Area is likely just a Long and Lat with broader categories
* Should we use both whales? Given that one of the appears only in some trials 